<!DOCTYPE html>
<html>
    <head>
        <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    </head>
    <body>
        <a-scene>
            <a-assets>
                <video id="library" autoplay loop="true" src="/media/360-videos/library.mp4"></video>
                <img id="location1" src="/media/360-pictures/library/corner1.jpg">
                <img id="location2" src="/media/360-pictures/library/corner2.jpg">
                <img id="location3" src="/media/360-pictures/library/corner3.jpg">
                <img id="location4" src="/media/360-pictures/library/corner4.jpg">
            </a-assets>

            <a-videosphere src="#library"></a-videosphere>

            


            <a-box position="-19.473 11 -14.050" rotation="0 0 0" color="#4CC3D9"
                class="clickable" data-src="#location1"
                animation__click="property: position; to: -19.473 12 -14.050; dur: 500; easing: easeInOutQuad; loop: true; dir: alternate"
                event-set__click="_event: mousedown; _target: #library; src: #location1">
            </a-box>

            <a-box position="0.317 10.248 37.215" rotation="0 0 0" color="#eb4034"
                class="clickable" data-src="#location2"
                animation__click="property: position; to: 0.317 11.248 37.215; dur: 500; easing: easeInOutQuad; loop: true; dir: alternate"
                event-set__click="_event: mousedown; _target: #library; src: #location2">
            </a-box>

            <a-box position="48.189 7.898 -25.758" rotation="0 0 0" color="red"
                class="clickable" data-src="#location3"
                animation__click="property: position; to: 48.189 9 -25.758; dur: 500; easing: easeInOutQuad; loop: true; dir: alternate"
                event-set__click="_event: mousedown; _target: #library; src: #location3">
            </a-box>

            <a-box position="38.275 5.530 0.895" rotation="0 0 0" color="#FFC65D"
                class="clickable" data-src="#location4"
                animation__click="property: position; to: 38.275 6.5 0.895; dur: 500; easing: easeInOutQuad; loop: true; dir: alternate"
                event-set__click="_event: mousedown; _target: #library; src: #location4">
            </a-box>

            <a-camera position="2 3 5">
                <a-cursor color="red"></a-cursor>
            </a-camera>
        </a-scene>

        <script>
            AFRAME.registerComponent('click-handler', {
                init: function () {
                    this.el.addEventListener('click', (e) => {
                        let src = this.el.getAttribute('data-src');
                        let videosphere = document.querySelector('a-videosphere');
                        if (videosphere) {
                            videosphere.setAttribute('src', src);
                        }
                    });
                }
            });
        
            document.addEventListener('DOMContentLoaded', () => {
                document.querySelectorAll('.clickable').forEach(el => {
                    el.setAttribute('click-handler', '');
                });
            });
        </script>
    </body>
</html>
